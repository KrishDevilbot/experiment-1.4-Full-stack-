<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Character Counter</title>
<style>
  body{margin:0;font-family:sans-serif;background:#f2f3ff}
  .box{max-width:700px;margin:40px auto;background:#fff;padding:20px;border-radius:10px;box-shadow:0 5px 20px #0001}
  textarea{width:100%;height:180px;padding:10px;font-size:15px;border-radius:8px;border:1px solid #ccc;resize:vertical}
  .row{display:flex;gap:10px;align-items:center;margin-top:10px;flex-wrap:wrap}
  .row span{font-weight:600;color:#555}
  .progress{height:8px;background:#eee;border-radius:10px;overflow:hidden;margin-top:6px}
  .bar{height:100%;width:0;background:#2563eb}
  button{padding:6px 12px;border:1px solid #ccc;border-radius:6px;background:#f8f8f8;cursor:pointer}
  button.primary{background:#2563eb;color:#fff;border:none}
</style>
</head>
<body>
<div class="box">
  <h2>Live Character Counter</h2>
  <textarea id="text" placeholder="Start typing..."></textarea>

  <div class="row">
    <span id="chars">Characters: 0</span>
    <span id="words">Words: 0</span>
    <label><input type="checkbox" id="limitChk"> Limit</label>
    <input type="number" id="limit" value="280" style="width:70px">
    <button id="clear">Clear</button>
    <button id="copy">Copy</button>
    <button id="save" class="primary">Save</button>
  </div>

  <div class="progress"><div class="bar" id="bar"></div></div>
  <div id="info" style="margin-top:6px;color:#777;font-size:14px">No limit set.</div>
</div>

<script>
const text=document.getElementById("text"),
chars=document.getElementById("chars"),
words=document.getElementById("words"),
limitChk=document.getElementById("limitChk"),
limit=document.getElementById("limit"),
bar=document.getElementById("bar"),
info=document.getElementById("info");

function update(){
  let t=text.value.trim();
  let c=t.length,w=t? t.split(/\s+/).length:0;
  chars.textContent="Characters: "+c;
  words.textContent="Words: "+w;

  if(limitChk.checked){
    let max=parseInt(limit.value)||1;
    if(c>max) text.value=text.value.slice(0,max),c=max;
    let pct=Math.min(100,(c/max)*100);
    bar.style.width=pct+"%";
    info.textContent=`${c}/${max} characters`;
  } else{
    bar.style.width="0%";
    info.textContent="No limit set.";
  }
}

text.oninput=update;
limitChk.onchange=()=>update();
limit.oninput=()=>update();

document.getElementById("clear").onclick=()=>{text.value="";update();}
document.getElementById("copy").onclick=()=>navigator.clipboard.writeText(text.value);
document.getElementById("save").onclick=()=>{
  let a=document.createElement("a"),b=new Blob([text.value],{type:"text/plain"});
  a.href=URL.createObjectURL(b);a.download="text.txt";a.click();
};

update();
</script>
</body>
</html>
